@model webZone.ViewModels.RotideViewModel
﻿@{
    ViewData["Title"] = "Rotide";
}

<link rel="stylesheet" href="css/codemirror.css" />
<link rel="stylesheet" href="css/monokai.css" />
<link rel="stylesheet" href="css/rotide.css" />
<link rel="stylesheet" href="~/contextMenu/jquery.contextMenu.css" />

@* Customizable Modal *@
<div class="modal fade" id="newProjectModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Create new Project</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <label for="inProjectName">Project name:</label>
                <input id="inProjectName" type="text" class="form-control" />
                <label for="inProjectRoot">root:</label>
                <input id="inProjectRoot" type="text" class="form-control" />
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="CreateNewProject()">Save changes</button>
            </div>

        </div>
    </div>
</div>

@* Context menu items *@
<ul id="contextMenu" class="dropdown-menu" role="menu" style="display:none;">
    <li><a tabindex="-1" href="#">New folder</a></li>
    <li><a tabindex="-1" href="#">New file</a></li>
    <li class="divider"></li>
    <li><a tabindex="-1" href="#">Delete</a></li>
</ul>

<div class="container-fluid">
    <div class="row">
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="ddmProjectSelect" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Select project
            </button>
            <div class="dropdown-menu" aria-labelledby="ddmProjectSelect">
                @foreach (var project in Model.projects)
                {
                    <a class="dropdown-item">@(project.name)</a>
                }
            </div>
        </div>
    </div>

    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#newProjectModal">
        Launch demo modal
    </button>

    <div class="row">
        <div class="col-lg-2">
            <div class="fileTree"></div>
        </div>
        <div class="col-lg-10">
            <textarea id="textInput" class="rotide-editor"></textarea>
        </div>
    </div>

    <div class="row">
        <div class="col-lg">
            <input id="filePath" type="text">
        </div>
        <div class="col-lg">
            <button onclick="SaveFile()">Save file</button>
        </div>
    </div>
</div>

@section scripts{
    <script src="~/contextMenu/jquery.contextMenu.js"></script>
    <script src="~/contextMenu/jquery.ui.position.js"></script>
    <script src="~/js/jQueryFileTree.js"></script>
    <script src="~/js/codemirror.js"></script>
    <script src="~/js/mode/javascript/javascript.js"></script>
    <script src="~/js/mode/clike/clike.js"></script>
    <script src="~/js/mode/css/css.js"></script>
    <script src="~/js/mode/htmlmixed/htmlmixed.js"></script>
    <script src="~/js/mode/lua/lua.js"></script>
    <script src="~/js/mode/markdown/markdown.js"></script>
    <script src="~/js/mode/php/php.js"></script>
    <script src="~/js/mode/python/python.js"></script>
    <script src="~/js/mode/sql/sql.js"></script>
    <script src="~/js/mode/xml/xml.js"></script>

    <!-- Rotide -->
    <script src="~/js/rotide.js"></script>

    <!-- Script with Razor hooks -->
    <script>
        let startupProject = "@Model.startProject?.name";
        console.log(startupProject);

        if (typeof startupProject === "string" && startupProject !== "") {
            BuildFileTree(startupProject);
        }
    </script>
}
